@startuml
title TinyOpt UML
left to right direction
enum "NodeType" as C_0003648870377152845823
enum C_0003648870377152845823 {
NODE_PROGRAM
NODE_DECLARATION
NODE_ASSIGNMENT
NODE_EXPRESSION
NODE_CONDITION
NODE_IF_STATEMENT
NODE_WHILE_STATEMENT
NODE_FOR_STATEMENT
NODE_COMPOUND_STATEMENT
NODE_RETURN
NODE_BREAK
NODE_CONTINUE
NODE_IDENTIFIER
NODE_NUMBER
NODE_CHAR_LITERAL
NODE_STRING_LITERAL
NODE_BINARY_OP
NODE_UNARY_OP
NODE_FUNCTION_DEF
NODE_FUNCTION_CALL
NODE_PARAMETER_LIST
}
enum "DataType" as C_0005733058170336282203
enum C_0005733058170336282203 {
TYPE_INT
TYPE_FLOAT
TYPE_CHAR
TYPE_VOID
TYPE_ARRAY
}
enum "Operator" as C_0006416427600438305270
enum C_0006416427600438305270 {
OP_ADD
OP_SUB
OP_MUL
OP_DIV
OP_MOD
OP_EQ
OP_NE
OP_LT
OP_LE
OP_GT
OP_GE
OP_AND
OP_OR
OP_NOT
OP_ASSIGN
OP_ADD_ASSIGN
OP_SUB_ASSIGN
OP_MUL_ASSIGN
OP_DIV_ASSIGN
OP_MOD_ASSIGN
OP_INC
OP_DEC
}
class "ast_node" as C_0007571958798801733884
class C_0007571958798801733884 {
__
+is_dead_code : int
+next : struct ast_node *
+parent : struct ast_node *
+type : NodeType
}
class "program_node" as C_0008504782184973540183
class C_0008504782184973540183 {
__
+base : TinyOptASTNode_t
+statements : struct ast_node *
}
class "declaration_node" as C_0008143130621897172269
class C_0008143130621897172269 {
__
+array_size : int
+base : TinyOptASTNode_t
+data_type : DataType
+hash : uint64_t
+initial_value : struct ast_node *
+name : char *
}
class "assignment_node" as C_0001342368560878539466
class C_0001342368560878539466 {
__
+base : TinyOptASTNode_t
+hash : uint64_t
+op : Operator
+value : struct ast_node *
+variable : char *
}
class "expression_node" as C_0017886610303587092655
class C_0017886610303587092655 {
__
+base : TinyOptASTNode_t
+left : struct ast_node *
+op : Operator
+right : struct ast_node *
+value : char *
}
class "condition_node" as C_0018407860206701339822
class C_0018407860206701339822 {
__
+base : TinyOptASTNode_t
+left : struct ast_node *
+op : Operator
+right : struct ast_node *
}
class "if_node" as C_0004322909781101306779
class C_0004322909781101306779 {
__
+base : TinyOptASTNode_t
+condition : struct ast_node *
+else_statement : struct ast_node *
+then_statement : struct ast_node *
}
class "while_node" as C_0002860966432148262288
class C_0002860966432148262288 {
__
+base : TinyOptASTNode_t
+body : struct ast_node *
+condition : struct ast_node *
+loop_hash : uint64_t
}
class "for_node" as C_0000655798535069671770
class C_0000655798535069671770 {
__
+base : TinyOptASTNode_t
+body : struct ast_node *
+condition : struct ast_node *
+increment : struct ast_node *
+init : struct ast_node *
+loop_hash : uint64_t
}
class "compound_node" as C_0007596126866211110298
class C_0007596126866211110298 {
__
+base : TinyOptASTNode_t
+statements : struct ast_node *
}
class "return_node" as C_0016981464126876213740
class C_0016981464126876213740 {
__
+base : TinyOptASTNode_t
+value : struct ast_node *
}
class "control_node" as C_0008257493566770669678
class C_0008257493566770669678 {
__
+base : TinyOptASTNode_t
+is_break : int
}
class "identifier_node" as C_0016099492391978888682
class C_0016099492391978888682 {
__
+base : TinyOptASTNode_t
+hash : uint64_t
+name : char *
}
class "number_node" as C_0003981719149010100100
class C_0003981719149010100100 {
__
+base : TinyOptASTNode_t
+data_type : DataType
+value : char *
}
class "charLiteral_node" as C_0016494935321309477120
class C_0016494935321309477120 {
__
+base : TinyOptASTNode_t
+value : char *
}
class "string_literal_node" as C_0013931288430394546602
class C_0013931288430394546602 {
__
+base : TinyOptASTNode_t
+value : char *
}
class "binary_op_node" as C_0003365714117471870439
class C_0003365714117471870439 {
__
+base : TinyOptASTNode_t
+left : struct ast_node *
+op : Operator
+right : struct ast_node *
}
class "unary_op_node" as C_0018084525261510948093
class C_0018084525261510948093 {
__
+base : TinyOptASTNode_t
+op : Operator
+operand : struct ast_node *
}
class "function_def_node" as C_0017720947995681395645
class C_0017720947995681395645 {
__
+base : TinyOptASTNode_t
+body : struct ast_node *
+name : char *
+parameters : struct ast_node *
+return_type : DataType
}
class "function_call_node" as C_0010242563506636177615
class C_0010242563506636177615 {
__
+arguments : struct ast_node *
+base : TinyOptASTNode_t
+name : char *
}
class "parameter_list_node" as C_0003560772042153672845
class C_0003560772042153672845 {
__
+base : TinyOptASTNode_t
+parameters : struct ast_node *
}
enum "ValueType" as C_0013247912142941685574
enum C_0013247912142941685574 {
VALUE_TYPE_UNKNOWN
VALUE_TYPE_INT
VALUE_TYPE_STRING
}
class "SymbolValue" as C_0002428673352038973782
class C_0002428673352038973782 {
__
+number : int
+str : char *
+type : ValueType
}
class "Symbol" as C_0016631331595777888010
class C_0016631331595777888010 {
__
+id_hash : uint64_t
+loop_hash : uint64_t
+name : char *
+node : TinyOptASTNode_t *
+value : SymbolValue *
}
class "SymbolBucket" as C_0009513031106583738660
class C_0009513031106583738660 {
__
+next : struct SymbolBucket *
+symbol : Symbol *
}
class "symbol_table" as C_0015940532491206651176
class C_0015940532491206651176 {
__
+buckets : SymbolBucket **
+size : size_t
}
class "tinyopt_flags" as C_0005228237319480680497
class C_0005228237319480680497 {
__
+emit_cfg : _Bool
}
class "tinyopt" as C_0012209562727451577782
class C_0012209562727451577782 {
__
+ast : TinyOptASTNode_t *
+flags : TinyOptFlags_t *
+stab : TinyOptStab_t *
}
class "CFGBuildResult" as C_0014565580121050297492
class C_0014565580121050297492 {
__
+entry_id : int
+exit_id : int
}
C_0007571958798801733884 o-- C_0003648870377152845823 : +type
C_0007571958798801733884 --> C_0007571958798801733884 : +next
C_0007571958798801733884 --> C_0007571958798801733884 : +parent
C_0008504782184973540183 o-- C_0007571958798801733884 : +base
C_0008504782184973540183 --> C_0007571958798801733884 : +statements
C_0008143130621897172269 o-- C_0007571958798801733884 : +base
C_0008143130621897172269 o-- C_0005733058170336282203 : +data_type
C_0008143130621897172269 --> C_0007571958798801733884 : +initial_value
C_0001342368560878539466 o-- C_0007571958798801733884 : +base
C_0001342368560878539466 o-- C_0006416427600438305270 : +op
C_0001342368560878539466 --> C_0007571958798801733884 : +value
C_0017886610303587092655 o-- C_0007571958798801733884 : +base
C_0017886610303587092655 o-- C_0006416427600438305270 : +op
C_0017886610303587092655 --> C_0007571958798801733884 : +left
C_0017886610303587092655 --> C_0007571958798801733884 : +right
C_0018407860206701339822 o-- C_0007571958798801733884 : +base
C_0018407860206701339822 o-- C_0006416427600438305270 : +op
C_0018407860206701339822 --> C_0007571958798801733884 : +left
C_0018407860206701339822 --> C_0007571958798801733884 : +right
C_0004322909781101306779 o-- C_0007571958798801733884 : +base
C_0004322909781101306779 --> C_0007571958798801733884 : +condition
C_0004322909781101306779 --> C_0007571958798801733884 : +then_statement
C_0004322909781101306779 --> C_0007571958798801733884 : +else_statement
C_0002860966432148262288 o-- C_0007571958798801733884 : +base
C_0002860966432148262288 --> C_0007571958798801733884 : +condition
C_0002860966432148262288 --> C_0007571958798801733884 : +body
C_0000655798535069671770 o-- C_0007571958798801733884 : +base
C_0000655798535069671770 --> C_0007571958798801733884 : +init
C_0000655798535069671770 --> C_0007571958798801733884 : +condition
C_0000655798535069671770 --> C_0007571958798801733884 : +increment
C_0000655798535069671770 --> C_0007571958798801733884 : +body
C_0007596126866211110298 o-- C_0007571958798801733884 : +base
C_0007596126866211110298 --> C_0007571958798801733884 : +statements
C_0016981464126876213740 o-- C_0007571958798801733884 : +base
C_0016981464126876213740 --> C_0007571958798801733884 : +value
C_0008257493566770669678 o-- C_0007571958798801733884 : +base
C_0016099492391978888682 o-- C_0007571958798801733884 : +base
C_0003981719149010100100 o-- C_0007571958798801733884 : +base
C_0003981719149010100100 o-- C_0005733058170336282203 : +data_type
C_0016494935321309477120 o-- C_0007571958798801733884 : +base
C_0013931288430394546602 o-- C_0007571958798801733884 : +base
C_0003365714117471870439 o-- C_0007571958798801733884 : +base
C_0003365714117471870439 o-- C_0006416427600438305270 : +op
C_0003365714117471870439 --> C_0007571958798801733884 : +left
C_0003365714117471870439 --> C_0007571958798801733884 : +right
C_0018084525261510948093 o-- C_0007571958798801733884 : +base
C_0018084525261510948093 o-- C_0006416427600438305270 : +op
C_0018084525261510948093 --> C_0007571958798801733884 : +operand
C_0017720947995681395645 o-- C_0007571958798801733884 : +base
C_0017720947995681395645 o-- C_0005733058170336282203 : +return_type
C_0017720947995681395645 --> C_0007571958798801733884 : +parameters
C_0017720947995681395645 --> C_0007571958798801733884 : +body
C_0010242563506636177615 o-- C_0007571958798801733884 : +base
C_0010242563506636177615 --> C_0007571958798801733884 : +arguments
C_0003560772042153672845 o-- C_0007571958798801733884 : +base
C_0003560772042153672845 --> C_0007571958798801733884 : +parameters
C_0002428673352038973782 o-- C_0013247912142941685574 : +type
C_0016631331595777888010 --> C_0007571958798801733884 : +node
C_0009513031106583738660 --> C_0016631331595777888010 : +symbol
C_0009513031106583738660 --> C_0009513031106583738660 : +next
C_0015940532491206651176 --> C_0009513031106583738660 : +buckets
C_0012209562727451577782 --> C_0005228237319480680497 : +flags
C_0012209562727451577782 --> C_0007571958798801733884 : +ast
C_0012209562727451577782 --> C_0015940532491206651176 : +stab

'Generated with clang-uml, version 0.6.2
'LLVM version clang version 21.1.5
@enduml
